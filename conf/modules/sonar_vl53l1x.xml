<!DOCTYPE module SYSTEM "module.dtd">

<module name="sonar_vl53l1x" dir="sonar">
  <doc>
    <description>
     VL53L1X laser ranger AGL driver
    </description>
    <configure name="SONAR_VL53L1X_I2C_DEV" value="i2c1" description="I2C device to use for the VL53L1X sensor"/>
    <define name="SONAR_VL53L1X_I2C_ADDR" value="0x52" description="I2C address"/>
    <define name="SONAR_VL53L1X_OFFSET" value="0"  description="sensor offset in mm - default is 0"/>
    <define name="USE_SONAR" value="" description="activate use of sonar in INS extended filter (only rotorcraft)"/>
  </doc>

  <header>
    <file name="sonar_vl53l1x.h"/>
  </header>

  <init fun="sonar_vl53l1x_init()"/>
  <periodic fun="sonar_vl53l1x_read()" freq="20"/>

  <makefile target="ap|sim">
    <file name="sonar_vl53l1x.c"/>
  </makefile>
  <makefile target="ap">
    <configure name="SONAR_VL53L1X_I2C_DEV" default="i2c1" case="lower|upper"/>
    <define name="SONAR_VL53L1X_I2C_DEV" value="$(SONAR_VL53L1X_I2C_DEV_LOWER)"/>
    <define name="USE_$(SONAR_VL53L1X_I2C_DEV_UPPER)"/>
    <file name="vl53l1_platform.c" dir="peripherals"/>
    <file name="vl53l1_api.c" dir="peripherals"/>
    <file name="vl53l1_nonblocking.c" dir="peripherals"/>
  </makefile>

</module>
